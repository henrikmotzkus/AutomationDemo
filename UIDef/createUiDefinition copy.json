{
    "handler": "Microsoft.Compute.MultiVm",
    "version": "0.1.2-preview",
    "parameters": {
		"config": {
            "isWizard": false,
            "basics": { }
        },
        "basics": [
			{
                "name": "section1",
                "type": "Microsoft.Common.Section",
                "label": "Dieser Wizard erstellt eine Virtuelle Maschine nach Unternehmensvorgaben",
                "elements": [
                    {
						"name": "textBlock1",
						"type": "Microsoft.Common.TextBlock",
						"visible": true,
						"options": {
							"text": "Hier findest Du weitere Informationen zu diesem Prozess.",
							"link": {
								"label": "Hier mehr",
								"uri": "https://github.com/henrikmotzkus/AutomationDemo"
							}
						}
					},
					{
						"name": "legalAccept",
						"type": "Microsoft.Common.CheckBox",
						"label": "Ich stimme den Bedingungen zu.",
						"constraints": {
							"required": true,
							"validationMessage": "Please acknowledge the legal conditions."
						}
					}
                ],
                "visible": true
            }
        ],
        "steps": [
			{
				"name":"Text",
				"label":"Generelle Angaben zur Organisation",
				"elements":[
					{
						"name": "Kostenstelle",
						"type": "Microsoft.Common.TextBox",
						"label": "Kostenstelle",
						"placeholder": "",
						"defaultValue": "",
						"toolTip": "Die Kostenstelle wird mit den Kosten dieser Resourcen automatisch belastet.",
						"constraints": {
							"required": true,
							"regex": "^[a-z0-9A-Z]{1,30}$",
							"validationMessage": "Only alphanumeric characters are allowed, and the value must be 1-30 characters long."
						},
						"visible": true
					}
				]
			},
			{
				"name":"vmsettings",
				"label":"Virtuelle Maschine",
				"elements":[
					{
						"name": "dropDown1",
						"type": "Microsoft.Common.DropDown",
						"label": "Windows Betriebssystem",
						"placeholder": "",
						"defaultValue": "2016-Datacenter",
						"toolTip": "Waehle Dein Betriebssystem Image aus.",
						"constraints": {
							"allowedValues": [
								{
									"label": "2008-R2-SP1",
									"value": "2008-R2-SP1"
								},
								{
									"label": "2012-Datacenter",
									"value": "2012-Datacenter"
								},
								{
									"label": "2016-Datacenter",
									"value": "2016-Datacenter"
								}
							],
							"required": true
						},
						"visible": true
					},
					{
						"name": "vmSizeSelector1",
						"type": "Microsoft.Compute.SizeSelector",
						"label": "Size",
						"toolTip": "",
						"recommendedSizes": [
							"Standard_D1",
							"Standard_D2",
							"Standard_D3"
						],
						"constraints": {
							"allowedSizes": [],
							"excludedSizes": [],
							"numAvailabilityZonesRequired": 3,
							"zone": "3"
						},
						"options": {
							"hideDiskTypeFilter": false
						},
						"osPlatform": "Windows",
						"imageReference": {
							"publisher": "MicrosoftWindowsServer",
							"offer": "WindowsServer",
							"sku": "2012-R2-Datacenter"
						},
						"count": 1,
						"visible": true
					},
					{
						"name": "passwordBox1",
						"type": "Microsoft.Common.PasswordBox",
						"label": {
							"password": "Password",
							"confirmPassword": "Confirm password"
						},
						"toolTip": "",
						"constraints": {
							"required": true,
							"regex": "^[a-zA-Z0-9]{8,}$",
							"validationMessage": "Password must be at least 8 characters long, contain only numbers and letters"
						},
						"options": {
							"hideConfirmation": false
						},
						"visible": true
					}
					
				]
			},
            {
                "name": "tags",
                "label": "Zusaetzliche Tags",
                "elements": [
                    {
                        "name": "tagsByResource",
                        "type": "Microsoft.Common.TagsByResource",
                        "resources": [
                            "Microsoft.Compute/virtualMachines"
                        ]
                    }
                ]
            }
        ],
		
		"outputs": {
			"adminpassword":"[steps('vmsettings').passwordBox1]",
			"OSVersion":"[steps('vmsettings').dropDown1]",
			"tagsByResource": "[steps('tags').tagsByResource]",
			"vmSize":"[steps('vmsettings').vmSizeSelector1]",
			"locatin":"[location()]"
		} 
	}
}